#  μ‹¤μ‹κ°„ λ€κ·λ¨ μ„λΉ„μ¤ μ•„ν‚¤ν…μ²
WebSocketμ€ μ‹¤μ‹κ°„ μ–‘λ°©ν–¥ ν†µμ‹ μ— μ ν•©ν•μ§€λ§, λ€κ·λ¨ μ„λΉ„μ¤μ—μ„λ” λ‡ κ°€μ§€ ν•κ³„κ°€ μμ.

## β WebSocket λ‹¨λ… μ‚¬μ©μ ν•κ³„

### 1. μ„λ²„ ν™•μ¥ λ¬Έμ  (μν‰ ν™•μ¥ μ–΄λ ¤μ›€)

- WebSocket μ—°κ²°μ€ νΉμ • μ„λ²„μ™€ μ μ§€λ¨.
- __π”¥ ν΄λΌμ΄μ–ΈνΈκ°€ A μ„λ²„μ— μ—°κ²°λμ–΄ μλ”λ°, B μ„λ²„μ—μ„ λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄μ•Ό ν•λ©΄ μ§μ ‘ μ „μ†΅ν•  μ μ—†μ.__
- ν•΄κ²°μ±…: Redis Pub/Sub, Kafka λ¥Ό μ‚¬μ©ν•΄ μ—¬λ¬ μ„λ²„μ—μ„ λ©”μ‹μ§€λ¥Ό κ³µμ .

### 2. λ©”μ‹μ§€ μ†μ‹¤ κ°€λ¥μ„±

- WebSocket μ—°κ²°μ΄ λμ–΄μ§€λ©΄ ν•΄λ‹Ή ν΄λΌμ΄μ–ΈνΈλ” λ©”μ‹μ§€λ¥Ό λ°›μ„ μ μ—†μ.
- μ„λ²„κ°€ λ‹¤μ΄λλ©΄ μ§„ν–‰ μ¤‘μ΄λ λ©”μ‹μ§€κ°€ μ μ‹¤λ  μλ„ μμ.
- ν•΄κ²°μ±…: Kafka, RabbitMQ κ°™μ€ λ©”μ‹μ§€ νλ¥Ό μ‚¬μ©ν•΄ λ©”μ‹μ§€ μμ†μ„± λ³΄μ¥.

### 3. μ΄μ „ λ©”μ‹μ§€ λ¶λ¬μ¤κΈ° μ–΄λ ¤μ›€

- WebSocketμ€ κΈ°λ³Έμ μΌλ΅ μ‹¤μ‹κ°„ μ „μ†΅λ§ κ°€λ¥ν•κ³ , κ³Όκ±° λ©”μ‹μ§€λ¥Ό μ €μ¥ν•μ§€ μ•μ.
- ν•΄κ²°μ±…: MySQL, Cassandra κ°™μ€ DBλ¥Ό μ‚¬μ©ν•΄ μ±„ν… κΈ°λ΅ μ €μ¥.

## π“ 2. WebSocket + λ©”μ‹μ§€ λΈλ΅μ»¤(Kafka, Redis pub/sub, RabbitMQ) μ΅°ν•©μ΄ ν•„μ”ν• μ΄μ 

λ€κ·λ¨ μ„λΉ„μ¤μ—μ„λ” WebSocketμ„ λ‹¨λ…μΌλ΅ μ“°λ” κ² μ•„λ‹λΌ, λ©”μ‹μ§€ λΈλ΅μ»¤μ™€ μ΅°ν•©ν•΄μ„ μ‚¬μ©.
μ΄λ ‡κ² ν•λ©΄ μ„λ²„ ν™•μ¥μ„± λ¬Έμ λ¥Ό ν•΄κ²°ν•λ©΄μ„λ„ μ‹¤μ‹κ°„ μ±„ν…μ΄ κ°€λ¥ν•¨.

### β… WebSocket + Redis Pub/Sub
- ν΄λΌμ΄μ–ΈνΈλ” WebSocketμ„ ν†µν•΄ μ„λ²„μ™€ μ—°κ²°.
- μ„λ²„λ” λ©”μ‹μ§€λ¥Ό Redis Pub/Subμ„ μ΄μ©ν•΄ λ‹¤λ¥Έ μ„λ²„λ΅ μ „λ‹¬.
- λ‹¤λ§, Redisλ” λ©”μ‹μ§€λ¥Ό μκµ¬ μ €μ¥ν•μ§€ μ•κΈ° λ•λ¬Έμ— λ©”μ‹μ§€ μ†μ‹¤ κ°€λ¥μ„±μ΄ μμ.

### β… WebSocket + Kafka (or RabbitMQ)
- Kafkaλ‚ RabbitMQ κ°™μ€ λ©”μ‹μ§€ νλ¥Ό μ¶”κ°€ν•λ©΄ λ©”μ‹μ§€λ¥Ό μ €μ¥ν•κ³ , ν•„μ”ν• κ²½μ° λ‹¤μ‹ μ „λ‹¬ν•  μ μμ.
- μ„λ²„κ°€ λ‹¤μ΄λλ”λΌλ„ Kafkaκ°€ λ©”μ‹μ§€λ¥Ό μ €μ¥ν•κ³  μμΌλ―€λ΅ λ°μ΄ν„° μ μ‹¤μ΄ μ—†μ.

## π“ 3. μ‹¤μ  μ„λΉ„μ¤μ—μ„λ” WebSocketμ„ μ–΄λ–»κ² μ‚¬μ©ν• κΉ?

### β… Kakao Entertainment (WebSocket + Kafka + Redis)
- WebSocket: ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ ν†µμ‹ 
- Kafka: λ©”μ‹μ§€ λΈλ΅μ»¤. μ±„ν… μ„λ²„κ°„ λ©”μ‹μ§€ μ „λ‹¬ λ° μ μ–΄ Command, Event λ©”μ‹μ§€ μ²λ¦¬.
- Redis: μ‹¤μ‹κ°„ λ°μ΄ν„° μ €μ¥

https://kakaoentertainment-tech.tistory.com/110

### β… Line (WebSocket + Redis Pub/Sub)
- WebSocket: ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ ν†µμ‹ 
- Akka toolkit μ„ ν†µν• κ³ μ† λ³‘ν–‰ μ²λ¦¬
- Redis Pub/Sub: λ©”μ‹μ§€ λΈλ΅μ»¤. μ„λ²„ κ°„μ μ½”λ©νΈ λ™κΈ°ν™”

https://engineering.linecorp.com/ko/blog/the-architecture-behind-chatting-on-line-live

### β… Daum μ‹¤μ‹κ°„ λ“κΈ€ (WebSocket + Redis + Kafka)
- WebSocket: μ‹¤μ‹κ°„ μ±„ν… μ „μ†΅.
- Kafka: λ©”μ‹μ§€ λΈλ΅μ»¤. λ©”μ‹μ§€λ¥Ό μ„μ‹μ μΌλ΅ μ €μ¥ν•κ³ , λ©”μ‹μ§€ μ „ν.
- Redis:  λ©”μ‹μ§€ μ €μ¥, λΉ λ¥Έ μ½κΈ°/μ“°κΈ° μ„±λ¥.
  https://tech.kakao.com/posts/390

![daum-arch-img1.png](doc/daum-arch-img1.png)
![daum-arch-img2.png](doc/daum-arch-img2.png)

### β… λ°°λ―Ό μ‡Όν•‘λΌμ΄λΈ μ±„ν… (WebSocket + Redis pub/sub)
- WebSocket: μ‹¤μ‹κ°„ μ±„ν… μ „μ†΅. Webflux λ΅ νΈλν”½μ„ non-bloking μ²λ¦¬.
- Redis pub/sub: λ©”μ‹μ§€ λΈλ΅μ»¤
- Redis μ— νλ°λλ” μ •λ³΄ μ €μ¥, λ°©μ†΅μ΄ λλ‚λ©΄ RDBμ— μ €μ¥.

https://techblog.woowahan.com/5268/

### β… Discord (WebSocket + Redis + ScyllaDB)
- WebSocket: μ‚¬μ©μκ°€ μμ„±/ν…μ¤νΈ μ±„ν…λ°©μ— μ ‘μ†ν•λ©΄ μ„λ²„μ™€ μ—°κ²°.
- Message Queue: μ‹¤μ‹κ°„ λ©”μ‹μ§€ μ „ν.
- MongoDB -> Cassandra -> ScyllaDB: λ€λ‰μ μ±„ν… λ©”μ‹μ§€λ¥Ό λ‹¨κ³„λ³„λ΅ μ €μ¥.

https://www.almabetter.com/bytes/articles/build-a-distributed-messaging-system-like-discord
![discord-arch-img.png](doc/discord-arch-img.png)

## 4. π€ μ΄μ μ‚¬ν•­

### π”¥ λ€κ·λ¨ μ‹¤μ‹κ°„ μ„λΉ„μ¤μ—μ„ λ£Έ(μ±„λ„)μ΄ λ§μ•„μ§ κ²½μ° λ°μƒν•  μ μλ” λ©”μ‹μ§€ λΈλ΅μ»¤ κ³Όλ¶€ν• λ¬Έμ , ν™•μ¥μ„± μ΄μ.

μ›Ήμ†μΌ“ μ„λ²„κ°€ λ¨λ“  λ£Έμ λ©”μ‹μ§€λ¥Ό κµ¬λ…ν•κ² λλ©΄:

#### 1. λ¶ν•„μ”ν• λ©”μ‹μ§€ μ²λ¦¬: νΉμ • μ›Ήμ†μΌ“ μ„λ²„μ— μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈκ°€ μ—†λ” λ£Έμ λ©”μ‹μ§€λ„ λ°›κ² λ©λ‹λ‹¤.
#### 2. λ©”λ¨λ¦¬ μ‚¬μ©λ‰ μ¦κ°€: κ΄€λ ¨ μ—†λ” λ©”μ‹μ§€κΉμ§€ μ²λ¦¬ν•΄μ•Ό ν•λ―€λ΅ λ©”λ¨λ¦¬ μ†λΉ„κ°€ λμ–΄λ‚©λ‹λ‹¤.
#### 3. λ„¤νΈμ›ν¬ λ€μ—­ν­ λ‚­λΉ„: ν•„μ” μ—†λ” λ©”μ‹μ§€λ„ μ „μ†΅λμ–΄ λ„¤νΈμ›ν¬ μμ›μ΄ λ‚­λΉ„λ©λ‹λ‹¤.

### π”¥ λ€κ·λ¨ μ„λΉ„μ¤μ ν•΄κ²°μ±…

#### 1. λ™μ  κµ¬λ… ν¨ν„΄:

μ›Ήμ†μΌ“ μ„λ²„λ” ν„μ¬ μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈκ°€ μλ” λ£Έλ§ κµ¬λ…ν•©λ‹λ‹¤.
ν΄λΌμ΄μ–ΈνΈκ°€ λ£Έμ— μ…μ¥/ν‡΄μ¥ν•  λ• κµ¬λ… μƒνƒλ¥Ό λ™μ μΌλ΅ λ³€κ²½ν•©λ‹λ‹¤.


#### 2. μƒ¤λ”© λ° νν‹°μ…”λ‹:

λ£Έμ„ μ—¬λ¬ νν‹°μ…μΌλ΅ λ‚λ„κ³ , μ›Ήμ†μΌ“ μ„λ²„κ°€ νΉμ • νν‹°μ…λ§ λ‹΄λ‹Ήν•©λ‹λ‹¤.
μ: Discordλ” "Guild(μ„λ²„)" λ‹¨μ„λ΅ μƒ¤λ”©μ„ κµ¬ν„ν–μµλ‹λ‹¤.


#### 3. κ³„μΈµν• λ©”μ‹μ§• κµ¬μ΅°:

μ¬λ™μ μ•„ν‚¤ν…μ²μ²λΌ Gateway Server β†’ Channel Server κµ¬μ΅°λ΅ λ‚λ„μ–΄ λ¶€ν•λ¥Ό λ¶„μ‚°ν•©λ‹λ‹¤.
κ° Gateway Serverλ” μμ‹ μ ν΄λΌμ΄μ–ΈνΈμ™€ κ΄€λ ¨λ μ±„λ„ μ •λ³΄λ§ κ΄€λ¦¬ν•©λ‹λ‹¤.


#### 4. λ©”μ‹μ§€ ν•„ν„°λ§:

λ©”μ‹μ§€ λΈλ΅μ»¤ μμ¤€μ—μ„ ν•„ν„°λ§ λ©”μ»¤λ‹μ¦μ„ κµ¬ν„ν•©λ‹λ‹¤.
μ: RabbitMQμ topic exchange, Kafka μ consumer group ν™μ©


#### 5. λ΅μ»¬ λΌμ°ν… μµμ ν™”:

β” κ°™μ€ μ„λ²„ μΈμ¤ν„΄μ¤μ— μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈ κ°„μ λ©”μ‹μ§€ μ „μ†΅μ„ μµμ ν™”.

β” λ©”μ‹μ§€ λΈλ΅μ»¤κ°€ λ³‘λ© μ§€μ μ΄ λμ§€μ•κ² λ°©μ§€ κ°€λ¥.

β΅ μ§€μ—­μ„± μΈμ‹(Locality Awareness):

μ„λ²„λ” ν„μ¬ μμ‹ μ—κ² μ—°κ²°λ λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ™€ κ·Έλ“¤μ΄ μ°Έμ—¬ μ¤‘μΈ λ£Έμ„ μ¶”μ  κµ¬λ…ν•©λ‹λ‹¤.
λ©”μ‹μ§€ μ „μ†΅ μ‹, λ©μ μ§€ ν΄λΌμ΄μ–ΈνΈκ°€ λ™μΌν• μ„λ²„μ— μλ”μ§€ ν™•μΈν•©λ‹λ‹¤.


β΅ λ΅μ»¬ μ°ν λΌμ°ν…(Local Bypass Routing):

λ©”μ‹μ§€ λ°μ‹ μμ™€ μμ‹ μκ°€ κ°™μ€ μ„λ²„μ— μλ‹¤λ©΄, λ©”μ‹μ§€ λΈλ΅μ»¤(Redis, RabbitMQ λ“±)λ¥Ό κ±°μΉμ§€ μ•κ³  μ§μ ‘ μ „λ‹¬ν•©λ‹λ‹¤.
μ™Έλ¶€ μ„λ²„μ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ„ν• λ©”μ‹μ§€λ§ λ©”μ‹μ§€ λΈλ΅μ»¤μ— λ°ν–‰ν•©λ‹λ‹¤.

## π“ 5. ν„μ¬ κµ¬ν„μ‚¬ν•­

λ°±μ—”λ“μ—μ„ RabbitMQ λ©”μ‹μ§€ λΈλ΅μ»¤λ¥Ό μ§μ ‘ μ‚¬μ©.

ν΄λΌμ΄μ–ΈνΈκ°€ ν”„λ΅ νΈμ—μ„ RabbitMQ STOMP ν”λ¬κ·ΈμΈμ„ ν™μ©ν•΄ λ©”μ‹μ§€ λΈλ΅μ»¤μ— μ§μ ‘ μ—°κ²°.

`ν΄λΌμ΄μ–ΈνΈ(λΈλΌμ°μ €) β†’ μ›Ήμ†μΌ“ β†’ RabbitMQ STOMP ν”λ¬κ·ΈμΈ β†’ RabbitMQ λ©”μ‹μ§€ λΈλ΅μ»¤`

ν΄λΌμ΄μ–ΈνΈλ” STOMP ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•μ—¬ λ©”μ‹μ§€ μ†΅μμ‹ .

## π“ 6. μ•„ν‚¤ν…μ² κ³ λ ¤μ‚¬ν•­

### β΅ 1μ•: ν„μ¬ μ•„ν‚¤ν…μ² κ·Έλ€λ΅ RabbitMQ λ©”μ‹μ§€ λΈλ΅μ»¤λ¥Ό μ§μ ‘ μ‚¬μ©.

ν„μ¬ μ•„ν‚¤ν…μ²λ¥Ό μ μ§€ν•λ, RabbitMQ ν™•μ¥ κ³ λ ¤. λ©”μ‹μ§• λΈλ΅μ»¤(RabbitMQ)κ°€ μ—°κ²°κ³Ό λ©”μ‹μ§€ λΌμ°ν…μ„ λ‹΄λ‹Ή.

μ—¬λ¬ RabbitMQ λ…Έλ“λ΅ ν΄λ¬μ¤ν„°λ¥Ό κµ¬μ„±, λ―Έλ¬λ§ ν μ„¤μ • ν•μ—¬ λ™κΈ°ν™”. ν΄λΌμ΄μ–ΈνΈκ°€ λ¶„μ‚°λ λ©”μ‹μ§€ λΈλ΅μ»¤ μ‹μ¤ν…μ— μ—°κ²°λλ” κµ¬μ΅°.

μ¥μ :

- λ©”μ‹μ§€ λ³΄μ¥μ„±: λ©”μ‹μ§€ μ§€μ†μ„±κ³Ό ν™•μΈ λ©”μ»¤λ‹μ¦μ„ μ κ³µν•μ—¬ μ‹ λΆ°μ„± μλ” μ „λ‹¬ λ³΄μ¥
- ν’λ¶€ν• λΌμ°ν…: ν† ν”½, ν¬μ•„μ›ƒ λ“± λ‹¤μ–‘ν• κµν™ μ ν•μΌλ΅ λ³µμ΅ν• λ©”μ‹μ§€ λΌμ°ν… μ§€μ›
- λ¶€ν• λ¶„μ‚°: νλ¥Ό ν†µν•΄ μ†λΉ„μ κ°„ μ‘μ—… λ¶€ν• μμ—°μ¤λ½κ² λ¶„μ‚°
- λ°±ν”„λ μ…” μ²λ¦¬: νλ¥Ό ν†µν• λ²„νΌλ§μΌλ΅ κ³Όλ¶€ν• μƒν™© κ΄€λ¦¬ μ©μ΄
- ν΄λ¬μ¤ν„°λ§ μ§€μ›: κΈ°λ³Έμ μΈ ν™•μ¥μ„±κ³Ό κ³ κ°€μ©μ„± μ κ³µ

λ‹¨μ :

- λ μ΄ν„΄μ‹: λ©”μ‹μ§€ λΈλ΅μ»¤λ¥Ό ν†µκ³Όν•λ―€λ΅ μ§μ ‘ μ†μΌ“ μ—°κ²°λ³΄λ‹¤ μ•½κ°„μ μ§€μ—° λ°μƒ

### β΅ 2μ•: μ—¬λ¬ Socket.IO + Redis

λ΅μ»¬ μ°ν λΌμ°ν…μΌλ΅ κ°•μλ³„ λΌμ°ν…μ„ ν•μ—¬ κ°™μ€ κ°•μλ¥Ό λ“¤μ„ ν΄λΌμ΄μ–ΈνΈλ¥Ό λ°μ•„ μ—°κ²°.

Redis μ—μ„ λ£Έ κ΄€λ¦¬.

λ©”μ‹μ§€ λΈλ΅μ»¤ μ—†μ΄ ν΄λΌμ΄μ–ΈνΈκ°€ A μ„λ²„μ— μ—°κ²°λμ–΄ μλ”λ°, B μ„λ²„μ—μ„ λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄μ•Ό ν•λ©΄ μ§μ ‘ μ „μ†΅ν•  μ μ—†κΈ° λ•λ¬Έμ— λ™μΌ Roomμ— μ†ν•΄μλ” ν΄λΌμ΄μ–ΈνΈλ” κ°™μ€ μ„λ²„μ— μμ–΄μ•Ό ν•¨.

μ¥μ :

- λ‚®μ€ λ μ΄ν„΄μ‹: μ§μ ‘μ μΈ μ—°κ²°λ΅ λ” λΉ λ¥Έ λ©”μ‹μ§€ μ „λ‹¬
- κ°„λ‹¨ν• κµ¬ν„: WebSocketλ§ μ‚¬μ©ν•λ” κ²½μ° μ΄κΈ° κµ¬ν„μ΄ λ” λ‹¨μ
- λ¦¬μ†μ¤ ν¨μ¨μ„±: μ¤‘κ°„ λΈλ΅μ»¤ μ—†μ΄ μ§μ ‘ ν†µμ‹ μΌλ΅ λ¦¬μ†μ¤ μ μ•½

λ‹¨μ :

- μƒνƒ κ΄€λ¦¬ λ³µμ΅μ„±: μ–΄λ–¤ ν΄λΌμ΄μ–ΈνΈκ°€ μ–΄λ–¤ μ„λ²„μ— μ—°κ²°λμ—λ”μ§€ μ¶”μ  ν•„μ”. λ³µμ΅ν• λ£Έ κ΄€λ¦¬.
- λ©”μ‹μ§€ λΌμ°ν… μ–΄λ ¤μ›€: μ„λ΅ λ‹¤λ¥Έ μ„λ²„μ— μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈ κ°„ ν†µμ‹ μ„ μ„ν• μ¶”κ°€ λ©”μ»¤λ‹μ¦ ν•„μ”
- ν™•μ¥ μ ν•: μ„λ²„ κ°„ μƒνƒ κ³µμ μ™€ λ™κΈ°ν™” μ–΄λ ¤μ›€
- μ‹ λΆ°μ„± λ‚®μ: λ©”μ‹μ§€ μ§€μ†μ„±κ³Ό μ¬μ „μ†΅ λ©”μ»¤λ‹μ¦ μ§μ ‘ κµ¬ν„ ν•„μ”

### β΅ 3μ•: Socket.IO + RabbitMQ + Redis cache

β΅ WebSocketμ„ μ‚¬μ©ν•μ§€λ§, λ€κ·λ¨ νΈλν”½μ„ κ°λ‹Ήν•κΈ° μ„ν•΄ λ©”μ‹μ§€ λΈλ΅μ»¤μ™€ κ²°ν•©ν•λ” κµ¬μ΅°κ°€ μΌλ°μ μ„.
λ™μ  κµ¬λ… ν¨ν„΄ μ μ©, λ΅μ»¬ λΌμ°ν…μ„ μ‚¬μ©ν•μ—¬ μ›Ήμ†μΌ“μ„ μµμ ν™”λ¥Ό ν•μ—¬ λ¶€ν•λ¥Ό μ¤„μ΄κ³  μ„±λ¥μ„ ν–¥μƒμ‹ν‚¬μ μλ‹¤.

β΅ ν„μ¬ RabbitMQ μ— STOMP ν”λ¬κ·ΈμΈν•μ—¬ μ‚¬μ©μ¤‘μ΄λΌ μ›Ήμ†μΌ“ μ„λ²„λ¥Ό μν‰ ν™•μ¥ν•κΈ° μ–΄λ ¤μ›€.
μ§€κΈ κ°€μ§€κ³  μλ” RabbitMQ, Redis λ¥Ό ν™μ©ν•λ©΄μ„ Socket.IO μ„λ²„λ§ ν™•μ¥κ°€λ¥ν•κ² ν•λ©΄ μΆ€λ” μμ›”ν•κ² κµ¬ν„μ΄ κ°€λ¥ν•  λ“―ν•¨.

#### μ‘λ™ λ°©μ‹

- ν΄λΌμ΄μ–ΈνΈ μ—°κ²°: μ‚¬μ©μλ” λ΅λ“ λ°Έλ°μ„λ¥Ό ν†µν•΄ Socket.IO μ„λ²„ μ¤‘ ν•λ‚μ— μ—°κ²°
- μ„λ²„ κ°„ ν†µμ‹ : Socket.IO μ„λ²„λ“¤μ€ RabbitMQλ¥Ό ν†µν•΄ μ„λ΅ λ©”μ‹μ§€ κµν™
- λ©”μ‹μ§€ μ „λ‹¬: ν• μ„λ²„μ— μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈμ λ©”μ‹μ§€κ°€ λ‹¤λ¥Έ μ„λ²„μ ν΄λΌμ΄μ–ΈνΈμ—κ² μ „λ‹¬ κ°€λ¥
- λ©”μ‹μ§€ μ €μ¥: λ””λΉ„ μ €μ¥μ„ μ„ν• λ©”μ‹μ§€ νλ¥Ό ν•λ‚ λ§λ“¤μ–΄ API μ—μ„ κµ¬λ…ν•μ—¬ λ””λΉ„ μ €μ¥.

1. ν΄λΌμ΄μ–ΈνΈκ°€ Socket.IO netty μ„λ²„μ— μ—°κ²°. κ°•μλ³„ κ°μ„¤λ λ£Έμ— μ΅°μΈ. μ΄λ• λ©λ΅μ€ Redis μ— μ €μ¥ν•μ—¬ κ΄€λ¦¬.
2. ν΄λΌμ΄μ–ΈνΈκ°€ λ©”μ‹μ§€λ¥Ό μ „λ‹¬ν•λ©΄ RabbitMQ μ—μ„ Fanout ν•μ—¬ λ¨λ“  μ„λ²„μ— λ©”μ‹μ§€λ¥Ό λΈλ΅λ“μΊμ¤νΈ ν•λ” λ™μ‹μ— Storage Queue λ¥Ό μ“μ.
3. API μ„λ²„λ“¤μ΄ Storage Queue λ¥Ό κµ¬λ…ν•κ³  μλ‹¤κ°€ λ©”μ‹μ§€λ¥Ό κ°€μ Έμ™€ RDB μ— μ±„ν… λ©”μ‹μ§€λ¥Ό μ €μ¥. νλ” κ²½μ μ†λΉ„μ ν¨ν„΄μΌλ΅ μ‘λ™ν•λ©° μ„λ²„μ¤‘ ν•λ‚λ§ λ©”μ‹μ§€λ¥Ό μ²λ¦¬.
4. μƒλ΅ λ“¤μ–΄μ¨ ν΄λΌμ΄μ–ΈνΈλ” api λ΅ μ΄μ „ μ±„ν… λ©”μ‹μ§€λ¥Ό κ°€μ Έμ¤λ©° λ™μ‹μ— μ†μΌ“μ„λ²„μ—μ„ κ°•μ λ£Έμ— μ…μ¥ν•μ—¬ μµμ‹  λ©”μ‹μ§€λ¥Ό μ΄μ–΄ λ°›κ² λ¨.
5. κ°•μλ¥Ό λ“£λ” μ‚¬μ©μκ°€ μ—†μΌλ©΄ λ£Έμ€ μΆ…λ£λκ³  Redis room μ •λ³΄λ„ μ‚­μ .

μ¥μ 

- ν™•μ¥μ„± ν–¥μƒ: Socket.IO μ„λ²„λ¥Ό λ…λ¦½μ μΌλ΅ μν‰ ν™•μ¥ κ°€λ¥
- λ‚®μ€ λ μ΄ν„΄μ‹: λ™μΌ μ„λ²„μ— μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈ κ°„ μ§μ ‘ ν†µμ‹ 
- μ‹ λΆ°μ„± μλ” λ©”μ‹μ§€ μ „λ‹¬: μ„λ²„ κ°„ ν†µμ‹ μ— RabbitMQμ μ‹ λΆ°μ„± ν™μ©. Redis pub/sub λ³΄λ‹¤ λ©”μ‹μ§€ λ³΄μ¥ν•λ‹¤κ³  ν•¨.
- λ¶€ν• λ¶„μ‚°: λ΅λ“ λ°Έλ°μ„μ™€ Socket.IO ν΄λ¬μ¤ν„°λ΅ λ¶€ν• λ¶„μ‚°
- μ¥μ•  λ€μ‘: ν• μ„λ²„κ°€ μ‹¤ν¨ν•΄λ„ λ‹¤λ¥Έ μ„λ²„λ΅ μ—°κ²° μ¬μ΅°μ • κ°€λ¥